FROM node:18

WORKDIR /app

# Copy dependencies and install them
COPY package.json package-lock.json ./
RUN npm install

# Ensure vite binary is executable
RUN chmod +x node_modules/.bin/vite

# Copy the rest of the code
COPY . .

# Run vite directly via its full path
RUN node ./node_modules/vite/bin/vite.js build

# Optional: Expose port if you serve from Node or static server
EXPOSE 5173
